#!/bin/bash
# Edit a file

# Run vi on remote server
[[ `hostname` == "web389.webfaction.com" ]] && vi $* && exit 0

# Use gedit by default  (comment these two lines to use emacs instead)
#rbg emacs $* && exit 

# Check to see if emacs is already running
process=`ps -ef|grep -v grep|grep emacs`
if [ -z "$process" ]
then
    echo 'Starting emacs'
    rbg /usr/bin/emacs "$*" 
else
    # Treat each argument as an edit request
    line=""
	for f in $*
    do
        # Use : to indicate line numbers
        line="$line `echo $f|sed 's/\(.*\):\(.*\)/+\2 \1/'`"
        echo "$line"
    done
    # echo "emacs $line"
    rbg emacsclient $line
fi

