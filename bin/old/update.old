#!/usr/bin/env python
# Update the application documents for all users

from os import environ
from os.path    import isfile, isdir, join
from os         import remove, path, getcwd, system, listdir, mkdir, chdir


# Return the files as a list
def list_dirs(directory):
    return sorted([ f for f in listdir(directory) if isdir(join(directory, f)) ])

# Update a single user account
def update_account(user):
    system ('cptree __App__/jobs %s/jobs' % user)
    if user in [ 'seaman', 'ronz@codegeek.net', 'mark.sluss48@gmail.com', 'sofar1121@gmail.com' ]:
        system ('cp __App__/UserSuperIndex %s/Index' % user)
    else:
        if not user in [ '__App__','__Staging__' ]:
            system ('cp __App__/UserIndex %s/Index' % user)

# Update all user accounts
chdir (environ['p']+'/doc')
for user in  list_dirs('.'):
    update_account(user)

